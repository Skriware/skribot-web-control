<!DOCTYPE html>
<html>
<body>

<div id="demo">
  <h2>Skribot Web Control Demo</h2>
  <div id="status"></div>

  <div id="remoteControl">
    <button type="button" class="remoteControl" name="open">Open gripper</button>
    <button type="button" class="remoteControl" name="close">Close gripper</button>
    <button type="button" class="remoteControl" name="forware">Forward</button>
    <button type="button" class="remoteControl" name="revolve">Revolve</button>
    <button type="button" class="remoteControl" name="Stop">Stop</button>
  </div>
</div>

<script>
var buttons = document.getElementsByClassName("remoteControl");
for (let i = 0; i < buttons.length; i++) {
    let button = buttons[i];
    button.addEventListener("click", sendCommand)
}

function sendCommand(event) {
  var commandName = event.target.name;

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("status").innerHTML =
      "Open operation success";
    } else {
      document.getElementById("status").innerHTML =
      "Failure";
    }
  };
  xhttp.open("GET", `http://localhost:5000?${commandName}`, true);
  xhttp.send();
 }
</script>
</body>
</html>
